<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>【FPGA】基于Xilinx公司的Vivado软件进行FPGA学习 | 九天之遥</title>

<link rel="shortcut icon" href="https://seutodaysz.github.io/favicon.ico?v=1604737607939">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://seutodaysz.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



 <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

 <script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script>


	<script src="https://cdn.jsdelivr.net/gh/seutodaysz/seutodaysz.github.io/media/js/jquery.min.js"></script>
	
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            九天之遥
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="https://seutodaysz.github.io" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="https://seutodaysz.github.io/archives" class="menu gt-a-link">
                            博客
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="https://seutodaysz.github.io/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="https://seutodaysz.github.io/project" class="menu gt-a-link" target="_blank">
                            项目
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="https://seutodaysz.github.io/aboutme" class="menu gt-a-link" target="_blank">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1604737607939" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    【FPGA】基于Xilinx公司的Vivado软件进行FPGA学习
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2020-10-27 ·
                    </time>
                    
                        <a href="https://seutodaysz.github.io/dADoqBkvU/" class="post-tags">
                            # FPGA
                        </a>
                    
                </div>
                <div class="post-content">
                    <!-- more -->
<p><img src="https://seutodaysz.github.io/post-images/1603804705841.jpg" alt="" loading="lazy"><br>
近期在做的一个科研要用到FPGA技术，在这里开一个FPGA学习的专场，对于这几年学习的数字电子技术进行一个系统的整理和梳理，以便自己后续的进一步深入掌握。</p>
<!-- more -->
<p>总的来说，FPGA技术是基于数字电子技术的底层开发技术，属于芯片领域的核心技术，也是国家现在被卡脖子的领域之一。对于高端的FPGA芯片，美国的封禁也难以阻挡我们向着人类智慧结晶的芯片技术发起进攻的号角。因此，要学好FPGA技术，另外复习一下数字电子技术。两者相辅相乘，才能是深入掌握了FPGA技术。</p>
<!-- more -->
<h1 id="一-xilinx公司简介">一、Xilinx公司简介</h1>
<p>先做一个简单的介绍，参考一下百度</p>
<h2 id="百度百科"><strong>百度百科</strong></h2>
<p>Xilinx(赛灵思)是全球领先的可编程逻辑完整解决方案的供应商。Xilinx研发、制造并销售范围广泛的高级集成电路、软件设计工具以及作为预定义系统级功能的IP（Intellectual Property）核。<br>
2018年7月18日，全球最大的可编程芯片（FPGA）厂商赛灵思宣布收购中国 AI 芯片领域的明星创业公司——深鉴科技。有“中国英伟达”之称的AI芯片初创企业将继续在其北京办公室运营。目前，交易金额及细节尚未公布。 [1]<br>
2019年10月23日， 2019《财富》未来50强榜单公布，赛灵思（Xilinx）排名第17。</p>
<h2 id="fpga芯片的组成"><strong>FPGA芯片的组成</strong></h2>
<p>1️⃣ 可编程输入输出单元；<br>
2️⃣ 基本可编程逻辑单元；<br>
3️⃣ 完整的时钟管理；<br>
4️⃣ 嵌入块式RAM；<br>
5️⃣ 丰富的布线资源；<br>
6️⃣ 内嵌的底层功能单元和专用硬件模块；</p>
<!-- more -->
<h1 id="二-vivado-软件安装">二、Vivado 软件安装</h1>
<p><a href="https://blog.csdn.net/taowei1314520/article/details/74860356">Vivado 下载与安装</a></p>
<h1 id="三-veilog-hdl-硬件描述语言">三、Veilog hdl 硬件描述语言</h1>
<p><a href="https://www.ituring.com.cn/book/miniarticle/120813">Verilog hdl 学习</a></p>
<h1 id="四-vivado软件的使用与一些入门的实验">四、Vivado软件的使用与一些入门的实验</h1>
<h2 id="gpio实验">GPIO实验</h2>
<h3 id="1-led点灯">1. led点灯</h3>
<pre><code>
module led_twinkle(
    input          sys_clk  ,  //系统时钟
    input          sys_rst_n,  //系统复位，低电平有效

    output  [1:0]  led         //LED灯
);

//reg define
reg  [25:0]  cnt ;

//*****************************************************
//**                    main code
//*****************************************************

//对计数器的值进行判断，以输出LED的状态
assign led = (cnt &lt; 26'd2500_0000) ? 2'b01 : 2'b10 ;
//assign led = (cnt &lt; 26'd5)         ? 2'b01 : 2'b10 ;  //仅用于仿真

//计数器在0~5000_000之间进行计数
always @ (posedge sys_clk or negedge sys_rst_n) begin
    if(!sys_rst_n)
        cnt &lt;= 26'd0;
    else if(cnt &lt; 26'd5000_0000)
//  else if(cnt &lt; 26'd10)  //仅用于仿真
        cnt &lt;= cnt + 1'b1;
    else
        cnt &lt;= 26'd0;
end

endmodule
</code></pre>
<h3 id="2-按键控制">2. 按键控制</h3>
<pre><code>module key_led(
    input               sys_clk ,
    input               sys_rst_n ,

    input        [1:0]  key ,
    output  reg  [1:0]  led
);

//reg define
reg [24:0] cnt;
reg        led_ctrl;

//*****************************************************
//**                    main code
//*****************************************************

//1-频率计数：计数器
always @ (posedge sys_clk or negedge sys_rst_n) begin
    if(!sys_rst_n)
        cnt &lt;= 25'd0;
    else if(cnt &lt; 25'd2500_0000)  //计数500ms=0.5s 
        cnt &lt;= cnt + 1'b1;
    else
        cnt &lt;= 25'd0;
end

//2-状态控制：每隔500ms就更改LED的闪烁状态
always @ (posedge sys_clk or negedge sys_rst_n) begin
    if(!sys_rst_n)
        led_ctrl &lt;= 1'b0;
    else if(cnt == 25'd2500_0000)
        led_ctrl &lt;= ~led_ctrl;
end

//3-功能模块：根据按键的状态以及LED的闪烁状态来赋值LED
always @ (posedge sys_clk or negedge sys_rst_n) begin
    if(!sys_rst_n)
        led &lt;= 2'b11;
    else 
		case(key)
			2'b10 :  //如果按键0按下，则两个LED交替闪烁
				if(led_ctrl == 1'b0)
					led &lt;= 2'b01;
				else
					led &lt;= 2'b10;
			2'b01 :  //如果按键1按下，则两个LED同时亮灭交替
				if(led_ctrl == 1'b0)
					led &lt;= 2'b11;
				else
					led &lt;= 2'b00;
			2'b11 :  //如果两个按键都未按下，则两个LED都保持点亮
					led &lt;= 2'b11;
			default: ;
		endcase
end

endmodule
</code></pre>
<h3 id="3-呼吸灯">3. 呼吸灯</h3>
<pre><code>
module breath_led(
    input   sys_clk   ,  //时钟信号50Mhz
    input   sys_rst_n ,  //复位信号

    output  led          //LED
);

//reg define
reg  [15:0]  period_cnt ;   //周期计数器频率：1khz 周期:1ms  计数值:1ms/20ns=50000
reg  [15:0]  duty_cycle ;   //占空比数值
reg          inc_dec_flag ; //0 递增  1 递减

//*****************************************************
//**                  main code
//*****************************************************

//根据占空比和计数值之间的大小关系来输出LED
assign   led = (period_cnt &gt;= duty_cycle) ?  1'b1  :  1'b0;

//周期计数器
always @(posedge sys_clk or negedge sys_rst_n) begin
    if(!sys_rst_n)
        period_cnt &lt;= 16'd0;
    else if(period_cnt == 16'd50000)
        period_cnt &lt;= 16'd0;
    else
        period_cnt &lt;= period_cnt + 1'b1;
end

//在周期计数器的节拍下递增或递减占空比
always @(posedge sys_clk or negedge sys_rst_n) begin
    if(!sys_rst_n) begin
        duty_cycle   &lt;= 16'd0;
        inc_dec_flag &lt;= 1'b0;
    end
    else begin
        if(period_cnt == 16'd50000) begin    //计满1ms
            if(inc_dec_flag == 1'b0) begin   //占空比递增状态
                if(duty_cycle == 16'd50000)  //如果占空比已递增至最大
                    inc_dec_flag &lt;= 1'b1;    //则占空比开始递减
                else                         //否则占空比以25为单位递增
                    duty_cycle &lt;= duty_cycle + 16'd25;
            end
            else begin                       //占空比递减状态
                if(duty_cycle == 16'd0)      //如果占空比已递减至0
                    inc_dec_flag &lt;= 1'b0;    //则占空比开始递增
                else                         //否则占空比以25为单位递减
                    duty_cycle &lt;= duty_cycle - 16'd25;
            end
        end
    end
end

endmodule
</code></pre>
<h2 id="ip核实验">IP核实验</h2>
<p>Verilog 中很重要的一种功能，就是实现了IP核的封装调用，极大提高的代码的复用效果。</p>
<h1 id="五-基于fpga的数字基带信号处理">五、基于FPGA的数字基带信号处理</h1>
<p>第五部分，主要介绍设么是CRC校验位。</p>
<h2 id="51-crc-校验"><strong>5.1 CRC 校验</strong></h2>
<p>分为以下这四部分来介绍。</p>
<h3 id="511-什么是crc校验"><strong>5.1.1 什么是CRC校验</strong></h3>
<p>CRC校验码的全称是循环冗余码，是数据通信领域中最常用的一种差错校验码，其特征是信息字段和校验字段的长度可以任意选定。</p>
<p>这个校验方式的根本思想是在发送数据的后面拼接上一些额外的数据位，使得这个拼接之后的数据可以被一个固定的数模2整除（这里的模2整除是一种区别于普通的除法的运算方法，也不难理解），之后将数据发送……接收端同样将整个拼接后的数据与之前确定的固定的数据做模2除法，若能整除，则说明传输过程没有出错，若不能整除，则可以根据余数判断是哪一位发生了错误。、</p>
<p>在RFID实验中，用到的CRC校验码有2种，主要是CRC5和CRC16.这里主要是基于CRC16进行深入的介绍。</p>
<h3 id="512-crc-校验的基本原理"><strong>5.1.2 CRC 校验的基本原理</strong></h3>
<p>生成CRC码的基本原理:<br>
任意一个由二进制位串组成的代码都可以和一个系数仅为‘0’和‘1’取值的多项式一一对应。例如：代码1010111对应的多项式为x6+x4+x2+x+1，而多项式为x5+x3+x2+x+1对应的代码101111。</p>
<p>标准CRC生成多项式如下表：</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>名称</strong></th>
<th style="text-align:center"><strong>生成多项式</strong></th>
<th style="text-align:center"><strong>简记式</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CRC-4</td>
<td style="text-align:center">x4+x+1</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">CRC-8</td>
<td style="text-align:center">x8+x5+x4+1</td>
<td style="text-align:center">0x31</td>
</tr>
<tr>
<td style="text-align:center">CRC-8</td>
<td style="text-align:center">x8+x2+x1+1</td>
<td style="text-align:center">0x07</td>
</tr>
<tr>
<td style="text-align:center">CRC-8</td>
<td style="text-align:center">x8+x6+x4+x3+x2+x1</td>
<td style="text-align:center">0x5E</td>
</tr>
<tr>
<td style="text-align:center">CRC-12</td>
<td style="text-align:center">x12+x11+x3+x+1</td>
<td style="text-align:center">80F</td>
</tr>
<tr>
<td style="text-align:center">CRC-16</td>
<td style="text-align:center">x16+x15+x2+1</td>
<td style="text-align:center">8005</td>
</tr>
<tr>
<td style="text-align:center">CRC16-CCITT</td>
<td style="text-align:center">x16+x12+x5+1</td>
<td style="text-align:center">1 021</td>
</tr>
<tr>
<td style="text-align:center">CRC-32</td>
<td style="text-align:center">x32+x26+x23+...+x2+x+1</td>
<td style="text-align:center">04C11</td>
</tr>
<tr>
<td style="text-align:center">CRC-32c</td>
<td style="text-align:center">x32+x28+x27+...+x8+x6+1</td>
<td style="text-align:center">1EDC6F41</td>
</tr>
</tbody>
</table>
<p><strong>CRC校验是前面几段数据内容的校验值，为一个16位数据，发送时，低8位在前，高8为最后。</strong></p>
<p>例如：信息字段代码为: 1011001，校验字段为：1010。<br>
发送方：发出的传输字段为:  1 0 1 1 0 0 1 1 0 10<br>
信息字段       校验字段<br>
接收方：使用相同的计算方法计算出信息字段的校验码，对比接收到的实际校验码，如果相等及信息正确，不相等则信息错误；或者将接受到的所有信息除多项式，如果能够除尽，则信息正确</p>
<h3 id="513-crc校验的步骤"><strong>5.1.3 CRC校验的步骤</strong></h3>
<p>常用查表法和计算法。计算方法一般都是：<br>
（1）预置1个16位的寄存器为十六进制FFFF（即全为1），称此寄存器为CRC寄存器；<br>
（2）把第一个8位二进制数据（既通讯信息帧的第一个字节）与16位的CRC寄存器的低<br>
8位相异或，把结果放于CRC寄存器，高八位数据不变；<br>
（3）把CRC寄存器的内容右移一位（朝低位）用0填补最高位，并检查右移后的移出位；<br>
（4）如果移出位为0：重复第3步（再次右移一位）；如果移出位为1，CRC寄存器与多<br>
多项式A001（1010 0000 0000 0001）进行异或；<br>
（5）重复步骤3和4，直到右移8次，这样整个8位数据全部进行了处理；<br>
（6）重复步骤2到步骤5，进行通讯信息帧下一个字节的处理；<br>
（7）将该通讯信息帧所有字节按上述步骤计算完成后，得到的16位CRC寄存器的高、低<br>
字节进行交换；<br>
（8）最后得到的CRC寄存器内容即为：CRC码。</p>
<h3 id="514-源代码"><strong>5.1.4 源代码</strong></h3>
<pre><code>
module crc16(
	input						sclk		, 
	input						s_rst_n	,
	input			[7:0]		data	,
	output		reg	 [15:0]		out		
);


reg 			[15:0]		    crc16_out	;
reg 			[15:0]			crc_reg		;
reg 			temp;
integer  i,j,m,n ;

always @ (posedge sclk or negedge s_rst_n) begin
	if(s_rst_n == 1'b0)
		crc16_out&lt;=16'b0;
	else	
        crc16_out&lt;=crc_reg;
end


always @ (crc16_out or data) begin
        crc_reg=crc16_out;
        for (i = 7; i &gt;= 0; i = i - 1)
            begin
                temp=data[i]^crc_reg[15];
 
                for (j = 15;  j &gt; 12; j = j - 1)
                    begin
                        crc_reg[j]=crc_reg[j-1];
                    end
                crc_reg[12]=temp^crc_reg[11];
 
                for (m = 11; m &gt;5 ; m = m - 1)
                    begin
                        crc_reg[m]=crc_reg[m-1];
                    end
                crc_reg[5]=temp^crc_reg[4];
 
                for (n = 4; n &gt;0 ; n = n - 1)
                    begin
                        crc_reg[n]=crc_reg[n-1];
                    end
                crc_reg[0]=temp^0;
            end
        out=crc_reg;
end
endmodule
</code></pre>
<h1 id="六-基于fpga的深度学习加速">六、基于FPGA的深度学习加速</h1>

                </div>
            </article>
        </div>

        

        
            <span id="/FPGA//" class="leancloud_visitors" data-flag-title="【FPGA】基于Xilinx公司的Vivado软件进行FPGA学习">
                <em class="post-meta-item-text">阅读量 </em>
                <i class="leancloud-visitors-count">0</i>
            </span>
        

        

        
            <script src='https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js'></script>

<style>
	div#vcomments{
		width:90%;
		max-width: 850px;
		padding: 2.5%
	}
</style>


	<div id="vcomments"></div>

<script>
	new Valine({
		el: '#vcomments',
		appId: 'hQq39TFWfYyTmwsWwGfUMmVq-gzGzoHsz',
		appKey: 'UgzjcB6IjSb96oLsfIKsYEHk',
		avatar: 'monsterid',
		pageSize: 5,
		recordIp: true,
		placeholder: '快来评论我的文章吧',
		visitor: true,
	});
</script>


        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">不积跬步无以至千里
不积小流无以成江海</div>
    <div class="social-container">
        
            
                <a href="https://github.com/seutodaysz" target="_blank">
                    <i class="fab fa-github gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
            
                <a href="https://www.zhihu.com/people/seusun" target="_blank">
                    <i class="fab fa-zhihu gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://seutodaysz.github.io/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

<script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw">
</script>


	<script src="https://cdn.jsdelivr.net/gh/seutodaysz/seutodaysz.github.io/media/js/jquery.min.js"></script>
	
    </div>
</div>
</body>
</html>
